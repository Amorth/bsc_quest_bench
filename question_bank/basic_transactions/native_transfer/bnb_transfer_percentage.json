{
  "id": "bnb_transfer_percentage",
  "category": "native_transfer",
  "difficulty": 2,
  "title": "Percentage BNB Transfer",
  "description": [
    "Transfer a percentage of BNB balance from sender's address to another address.",
    "",
    "Technical context:",
    "- Requires querying the sender's current balance before calculating transfer amount",
    "- Formula: transfer_amount = balance * (percentage / 100)",
    "- Use provider.getBalance(agentAddress) to get current balance",
    "- Standard gas limit: 21000"
  ],
  
  "natural_language_templates": [
    "Transfer {percentage}% of my BNB balance to {to_address}",
    "Send {percentage} percent of BNB to {to_address}",
    "Please transfer {percentage}% of the BNB I have to {to_address}",
    "I want to send {percentage}% of my BNB to address {to_address}"
  ],
  
  "parameters": {
    "to_address": {
      "type": "address",
      "role": "receiver",
      "description": "Recipient address",
      "generation": {
        "method": "random"
      }
    },
    "percentage": {
      "type": "integer",
      "unit": "%",
      "description": "Percentage of balance to transfer (1-100)",
      "generation": {
        "min": 10,
        "max": 90,
        "step": 5
      }
    }
  },
  
  "preconditions": [
    {
      "type": "balance_check",
      "address": "sender",
      "min_balance": 0.01,
      "description": "Sender must have at least 0.01 BNB"
    }
  ],
  
  "validation_rules": [
    {
      "type": "transaction_success",
      "weight": 30,
      "description": "Transaction must execute successfully"
    },
    {
      "type": "address_check",
      "field": "to",
      "expected": "{to_address}",
      "weight": 20,
      "description": "Target address must be correct"
    },
    {
      "type": "percentage_value_check",
      "field": "value",
      "percentage": "{percentage}",
      "base": "sender_balance_before",
      "tolerance": 0.02,
      "weight": 30,
      "description": "Transfer amount must be correct percentage of balance"
    },
    {
      "type": "gas_check",
      "min_gas": 21000,
      "max_gas_ratio": 3,
      "weight": 10,
      "description": "Gas settings must be reasonable"
    },
    {
      "type": "balance_percentage_change",
      "address": "sender",
      "expected_percentage": "-{percentage}",
      "tolerance": 0.02,
      "weight": 10,
      "description": "Balance change must match the percentage"
    }
  ],
  
  "composability": {
    "can_repeat": true,
    "parallel_safe": false,
    "state_dependencies": ["balance"],
    "requires_query": true,
    "mutually_exclusive_with": [],
    "natural_combination_with": ["balance_query", "erc20_transfer_percentage"]
  },
  
  "version": "1.0.0",
  "created_at": "2025-11-12",
  "updated_at": "2025-11-12"
}

