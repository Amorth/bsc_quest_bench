{
  "id": "erc20_approve",
  "version": "2.0.0",
  "category": "basic_transactions",
  "subcategory": "erc20_operations",
  "difficulty": "medium",
  "title": "ERC20 Token Approval",
  
  "natural_language_templates": [
    "Approve {spender_address} to spend {amount} {token_symbol}",
    "Grant approval for {spender_address} to use {amount} {token_symbol} tokens",
    "Please approve {amount} {token_symbol} for {spender_address}",
    "I want to allow {spender_address} to spend {amount} {token_symbol}"
  ],
  
  "description": [
    "Approve another address (typically a smart contract) to spend a specified amount of your ERC20 tokens.",
    "",
    "Technical context:",
    "- The approve function signature: approve(address spender, uint256 amount)",
    "- This sets the allowance for the spender to use your tokens",
    "- Common use case: approving DEX routers before swapping tokens",
    "- The amount must be converted to the token's decimal representation",
    "- Recommended gas limit: 50000",
    "",
    "Key considerations:",
    "- Create a Contract instance with the token address and ERC20 ABI",
    "- Use contract.interface.encodeFunctionData() to encode the approve call",
    "- The transaction 'to' field should be the token contract address",
    "- The transaction 'data' field contains the encoded function call",
    "- The transaction 'value' should be 0 (not sending native BNB)",
    "- The approval doesn't transfer tokens immediately, just sets allowance"
  ],
  
  "blockchain": {
    "chain": "BSC",
    "network": "mainnet"
  },
  
  "parameters": {
    "token_address": {
      "type": "address",
      "role": "contract",
      "description": "ERC20 token contract address",
      "generation": {
        "method": "from_list",
        "addresses": [
          "0x55d398326f99059fF775485246999027B3197955"
        ],
        "comment": "BSC Mainnet USDT"
      }
    },
    "token_symbol": {
      "type": "string",
      "description": "Token symbol for display",
      "generation": {
        "method": "from_list",
        "values": ["USDT"]
      }
    },
    "token_decimals": {
      "type": "integer",
      "description": "Token decimals",
      "generation": {
        "method": "fixed",
        "value": 18
      }
    },
    "spender_address": {
      "type": "address",
      "role": "spender",
      "description": "Address that will be approved to spend tokens (typically a contract)",
      "generation": {
        "method": "from_list",
        "addresses": [
          "0x10ED43C718714eb63d5aA57B78B54704E256024E"
        ],
        "comment": "BSC Mainnet PancakeSwap Router V2"
      }
    },
    "amount": {
      "type": "number",
      "unit": "USDT",
      "description": "Amount to approve in tokens",
      "generation": {
        "min": 10.0,
        "max": 500.0,
        "decimals": 2
      }
    }
  },
  
  "validation": {
    "pre_conditions": [
      {
        "type": "token_exists",
        "description": "Token contract must exist"
      }
    ],
    
    "post_conditions": [
      {
        "type": "transaction_success",
        "weight": 0.3,
        "description": "Transaction executed successfully"
      },
      {
        "type": "contract_call",
        "weight": 0.2,
        "description": "Transaction calls the correct token contract",
        "expected": "{token_address}"
      },
      {
        "type": "function_signature",
        "weight": 0.2,
        "description": "Correct ERC20 approve function signature",
        "expected": "approve(address,uint256)"
      },
      {
        "type": "allowance_set",
        "weight": 0.3,
        "description": "Allowance correctly set for spender",
        "spender": "{spender_address}",
        "expected_allowance": "{amount}"
      }
    ]
  },
  
  "metadata": {
    "tags": ["erc20", "approve", "allowance", "authorization", "intermediate"],
    "estimated_gas": 50000,
    "requires_contract": true,
    "contract_requirements": {
      "standard": "ERC20",
      "required_functions": ["approve", "allowance"]
    }
  }
}

