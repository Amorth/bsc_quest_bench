{
  "id": "swap_exact_bnb_for_tokens",
  "version": "2.0.0",
  "category": "defi_operations",
  "subcategory": "pancakeswap_swap",
  "difficulty": "easy",
  "title": "PancakeSwap Swap - BNB to Token",
  "natural_language_templates": [
    "Swap {amount_in} BNB for {token_symbol} tokens on PancakeSwap",
    "Exchange {amount_in} BNB to {token_symbol} using PancakeSwap Router",
    "Convert {amount_in} BNB to {token_symbol} tokens through PancakeSwap V2",
    "Trade {amount_in} BNB for {token_symbol} on PancakeSwap with {slippage}% slippage tolerance"
  ],
  "description": [
    "Swap BNB for ERC20 tokens using PancakeSwap V2 Router's swapExactETHForTokens function.",
    "",
    "Technical context:",
    "- PancakeSwap V2 Router (BSC Mainnet): 0x10ED43C718714eb63d5aA57B78B54704E256024E",
    "- Function signature: swapExactETHForTokens(uint amountOutMin, address[] calldata path, address to, uint deadline) external payable returns (uint[] memory amounts)",
    "- This is a payable function that requires sending BNB with the transaction",
    "- The swap follows Uniswap V2 AMM (Automated Market Maker) model: x * y = k",
    "- Function selector: 0x7ff36ab5",
    "- Recommended gas limit: 200000",
    "",
    "Key considerations:",
    "- amountOutMin: Minimum amount of tokens to receive (slippage protection)",
    "- path: Array of token addresses for the swap route [WBNB, TOKEN]",
    "- to: Recipient address (usually the sender/agent address)",
    "- deadline: Unix timestamp after which the transaction will revert",
    "- Must set transaction 'value' field to the BNB amount being swapped",
    "- WBNB address on BSC: 0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",
    "",
    "Slippage protection:",
    "- Calculate amountOutMin using getAmountsOut or apply a percentage (2-5% typical)",
    "- Formula: amountOutMin = expectedOutput * (1 - slippagePercent)",
    "- For testing, can use 0 for amountOutMin (accepts any output)",
    "",
    "Success criteria:",
    "- Transaction executes successfully",
    "- Correct PancakeSwap Router is called",
    "- BNB balance decreases by amountIn (plus gas)",
    "- Token balance increases by at least amountOutMin"
  ],
  "blockchain": {
    "chain": "BSC",
    "network": "mainnet"
  },
  "parameters": {
    "router_address": {
      "type": "address",
      "role": "contract",
      "description": "PancakeSwap V2 Router contract address",
      "generation": {
        "method": "fixed",
        "value": "0x10ED43C718714eb63d5aA57B78B54704E256024E"
      }
    },
    "token_address": {
      "type": "address",
      "role": "token_out",
      "description": "Target token to receive (USDT by default)",
      "generation": {
        "method": "fixed",
        "value": "0x55d398326f99059fF775485246999027B3197955",
        "comment": "USDT on BSC"
      }
    },
    "token_symbol": {
      "type": "string",
      "role": "display",
      "description": "Token symbol for display",
      "generation": {
        "method": "fixed",
        "value": "USDT"
      }
    },
    "token_decimals": {
      "type": "integer",
      "role": "calculation",
      "description": "Token decimal places",
      "generation": {
        "method": "fixed",
        "value": 18
      }
    },
    "wbnb_address": {
      "type": "address",
      "role": "token_in",
      "description": "WBNB address (wrapped BNB)",
      "generation": {
        "method": "fixed",
        "value": "0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c"
      }
    },
    "amount_in": {
      "type": "number",
      "unit": "BNB",
      "role": "swap_amount",
      "description": "Amount of BNB to swap",
      "generation": {
        "method": "random",
        "min": 0.001,
        "max": 0.01,
        "decimals": 4
      }
    },
    "slippage": {
      "type": "number",
      "unit": "percent",
      "role": "slippage_tolerance",
      "description": "Slippage tolerance percentage",
      "generation": {
        "method": "fixed",
        "value": 5.0
      }
    }
  },
  "validation": {
    "pre_conditions": [
      {
        "type": "balance_check",
        "description": "Agent must have sufficient BNB balance (amount + gas)"
      }
    ],
    "post_conditions": [
      {
        "type": "transaction_success",
        "weight": 0.25,
        "description": "Transaction executed successfully"
      },
      {
        "type": "contract_called",
        "weight": 0.15,
        "address": "{router_address}",
        "description": "Correct PancakeSwap Router called"
      },
      {
        "type": "function_selector",
        "weight": 0.15,
        "selector": "0x7ff36ab5",
        "description": "Correct function swapExactETHForTokens called"
      },
      {
        "type": "bnb_balance_change",
        "weight": 0.2,
        "expected_change": "-{amount_in}",
        "tolerance": "gas_only",
        "description": "BNB balance decreased by swap amount (plus gas)"
      },
      {
        "type": "token_balance_increase",
        "weight": 0.25,
        "token": "{token_address}",
        "min_increase": 0,
        "description": "Token balance increased (received output tokens)"
      }
    ]
  },
  "metadata": {
    "tags": [
      "pancakeswap",
      "swap",
      "dex",
      "amm",
      "defi",
      "bnb-to-token"
    ],
    "estimated_gas": 200000,
    "requires_contract": true,
    "network": "mainnet",
    "dex": "PancakeSwap V2",
    "swap_type": "exact_input",
    "difficulty_notes": [
      "Basic DEX swap operation",
      "Requires understanding of payable functions",
      "Requires understanding of swap paths",
      "Requires setting deadline parameter"
    ]
  }
}
